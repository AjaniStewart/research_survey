<!-- You must include this JavaScript file -->
<script src="https://assets.crowd.aws/crowd-html-elements.js"></script>
<script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-router-dom/umd/react-router-dom.min.js"></script>
<script crossorigin src="https://unpkg.com/react-router/umd/react-router.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- For the full list of available Crowd HTML Elements and their input/output documentation,
      please refer to https://docs.aws.amazon.com/sagemaker/latest/dg/sms-ui-template-reference.html -->

<!-- You must include crowd-form so that your task submits answers to MTurk -->
<div id="root"></div>

<script type="text/babel">

// TODO: have a default array of questions (as HTML tables)
// randomize the tables (somehow)
// add a next button and react router to implement pagination
// ???
// profit

const Router = window.ReactRouterDOM.HashRouter;
const Route =  window.ReactRouterDOM.Route;
const Link =  window.ReactRouterDOM.Link;
const Switch = window.ReactRouterDOM.Switch;

const Question = (props) => {
  console.log("1,2,3")
  return (
    <div>
      <input type="radio" name="test!" value="test"/>
      <Link to="/">Hi</Link>
      <Link to="/2">2</Link>
    </div>
  );
}

const Question2 = (props) => {
  console.log("3,2,1")
  return (
    <div>
      <input type="radio" name="test2" value="test2"/>
      <Link to="/">Hi</Link>
      <Link to="/1">1</Link>
    </div>
  );
}

const Landing = props => {
  return (
    <div>
      <p>Hi</p>
      <Link to="/1">1</Link>
      <Link to="/2">2</Link>
    </div>
  );
}

const AmazonCrowdComponents = props => {
  return (
    <crowd-form answer-format="flatten-objects">
      <crowd-instructions link-text="View instructions" link-type="button">
      <short-summary>
        <p>Provide a brief instruction here</p>
      </short-summary>

      <detailed-instructions>
        <h3>Provide more detailed instructions here</h3>
        <p>Include additional information</p>
      </detailed-instructions>

      <positive-example>
        <p>Provide an example of a good answer here</p>
        <p>Explain why it's a good answer</p>
      </positive-example>

      <negative-example>
        <p>Provide an example of a bad answer here</p>
        <p>Explain why it's a bad answer</p>
      </negative-example>
      </crowd-instructions>
      { props.children }
    </crowd-form>
  );
}


const Survey = (props) => {
  return (
      <AmazonCrowdComponents>
          <Route exact path="/" component={Landing} />
          <Route exact path="/1" component={Question} />
          <Route exact path="/2" component={Question2} />
      </AmazonCrowdComponents>
  );
}

ReactDOM.render(
  <Router>
    <Survey/>
  </Router>,
  document.getElementById('root')
);
</script>